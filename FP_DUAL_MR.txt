EMPRESA(ID, NU-nombre, NU-cif, U-email, U-telefono, direccion)
    PK(ID)

SEDE(ID, id_empresa, N-localidad, N-direccion)
    PK(ID)
    FK1(id_empresa --> EMPRESA(ID))
    CNS1(id_empresa on delete cascade)

INSTITUTO(ID, NU-nombre, U-email, localidad, direccion)
    PK(ID)

CICLO_FORMATIVO(ID, NU-nombre, N-nivel)
    PK(ID)

OFERTA_FORMATIVA(ID, N-annio_implantacion, N-id_instituto, N-id_ciclo)
    PK(ID)
    FK1(id_instituto --> INSTITUTO(ID))
    FK2(id_ciclo --> CICLO_FORMATIVO(ID))
    CHK1(annio_implantacion >= 2000)

CURSO(ID, N-nombre, N-annio_academico, id_oferta)
    PK(ID)
    FK1(id_oferta --> OFERTA_FORMATIVA(ID))
    CHK1(annio_academico >= 2000)

PERSONA(ID, N-nombre, N-apellidos, NU-dni, U-telefono, fecha_nacimiento, direccion)
    PK(ID)
    CHK1(fecha_nacimiento < CURRENT_DATE)

ALUMNO(ID_persona, id_curso)
    PK(ID_persona)
    FK1(ID_persona --> PERSONA(ID))
    FK2(id_curso --> CURSO(ID))
    CONS1(ID_persona on delete cascade)
    CONS2(id_curso on delete set null)

TUTOR_DOCENTE(ID_persona)
    PK(ID_persona)
    FK1(ID_persona --> PERSONA(ID))
    CNS1(ID_persona on delete cascade)

TUTOR_LABORAL(ID_persona, id_empresa)
    PK(ID_persona)
    FK1(ID_persona --> PERSONA(ID))
    FK2(id_empresa --> EMPRESA(ID))
    CNS1(ID_persona on delete cascade)

CONVENIO(ID, N-id_alumno, N-id_tutorD, N-id_tutorL, fecha_firma)
    PK(ID)
    FK1(id_alumno --> ALUMNO(ID_persona))
    FK2(id_tutorD --> TUTOR_DOCENTE(ID_persona))
    FK3(id_tutorL --> TUTOR_LABORAL(ID_persona))
    CONS1(id_alumno on delete cascade)
    CONS2(id_tutorD on delete cascade)
    CONS3(id_tutorL on delete cascade)
    CHK1(fecha_firma < CURRENT_DATE)

COMPETENCIA(ID, N-descripcion)
    PK(ID)

ACTIVIDAD_FORMATIVA(ID, N-nombre, N-id_competencia)
    PK(ID)
    FK1(id_competencia --> COMPETENCIA(ID))

EVALUACION(ID, id_alumno, id_actividad, comentario, nota, id_tutorL)
    PK(ID)
    FK1(id_alumno --> ALUMNO(ID_persona))
    FK2(id_actividad --> ACTIVIDAD_FORMATIVA(ID))
    FK3(id_tutorL --> TUTOR_LABORAL(ID_persona))
    CONS1(id_alumno on delete cascade)
    CONS2(id_actividad on delete cascade)
    CHK1(nota between 0 and 10)

CALENDARIO(id_sede, FECHA)
    PK(FECHA)
    FK1(id_sede --> SEDE(ID))

JORNADA(ID, id_alumno, N-hora_inicio, N-hora_fin, descripcion, fecha)
    PK(ID)
    FK1(fecha --> CALENDARIO(FECHA))
    FK2(id_alumno --> ALUMNO(ID_persona))
    CONS1(id_alumno on delete cascade)
    CHK1(hora_fin > hora_inicio)